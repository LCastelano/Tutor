---
title: "Iris Multivariada"
author: "Lucas Castelano"
date: "2024-12-12"
output: html_document
---

---

```{r}
library(plyr)
```


```{r}
library(ggplot2)
library(gg3D)
library(dplyr)
library(magrittr)
```

Vamos iniciar com um conjunto de dados simples 'iris'.

---

> ### Organizar dados.

> #### **COLUNAS**

##### OPERADOR PIPE
Instalar o pct magrittr. Agora, através dos dados 'iris' vamos selecionar duas colunas e aplicar um filtro nelas. Logo após vamos fazer uma lista agrupada em 'Species' cuja única coluna seja o número de ocorrência (frequência absoluta) de cada espécie.

```{r}
iris %>% select(Species, Sepal.Width) %>%
  filter(Sepal.Width >= 3) %>% ddply(.(Species), summarise,
                                     n = sum(!is.na(Sepal.Width)))
```


##### COMO ALTERAR OS NOMES DAS COLUNAS?

* Usando o índice da coluna:
```{r}
teste <- iris

names(teste)[5] <- 'Especies'

colnames(ex1)[2] <- 'mudou';
names(ex1)[3] <- 'mudoutbm';
names(ex1)[4]<- c('aquitbm');
ex1 <- ex2
names(ex1)[c(1,3,5)] <- c('alter1', 'alter2', 'alter3')
```


##### COMO MUDAR AS COLUNAS DE POSIÇÃO?

* Ordenando através das posições do df.

```{r}
# Ordena o cj de dados da última coluna para a primeira
iris.ord <- iris[5:1]

# Ordena de acordo com as posições desejadas
iris.ord <- iris.ord[c(1,3,5,4,2)]
```

Utilizando o pacote **dply**:
* Função **select()**: Manter ou remover colunas usando seus nomes ou tipos.

```{r}
# Sem PIPE
# Adiciona um vetor com os nomes das colunas na ordem desejada:
ex1 <- select(iris, c(Species, Petal.Width, Sepal.Width, Sepal.Length, Petal.Length))

# com PIPE
ex2 <- iris %>%
  select(Species, Sepal.Width, Petal.Width, Petal.Length, Sepal.Length)

```
* Função **pull()**: remove uma coluna na forma de vetor.

```{r}
ex1 %>% pull(alter1) #usando o nome da coluna a ser extraida
ex1 %>% pull(1) # usando o índice da coluna da esquerda para direita
ex1 %>% pull(-5) #usando o índice da coluna da direita para esquerda
```


##### COMO ALTERAR A POSIÇÃO DOS ELEMENTOS DE UMA COLUNA?

* Função **arrange()** organiza em ordem.

```{r}
# Seleciona as colunas Sepal.Width e alter3, filtra Sepal.Width maior ou igual a 3 ou alter3 maior ou igual a 5.5 e retorna o resultado organizado do maior para o menor na coluna Sepal.Width.
ex1 %>%  select(Sepal.Width, alter3) %>% 
  filter(Sepal.Width >= 3 | alter3 >= 5.5) %>% arrange(Sepal.Width)
```


* Alterar a posição dos elementos de uma coluna em um df altera necessariamente os elementos correspondentes nas demais colunas?
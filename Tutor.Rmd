---
title: "Iris Multivariada"
author: "Lucas Castelano"
date: "2024-12-12"
output: html_document
---

---

```{r}
library(plyr)
```


```{r}
library(ggplot2)
library(gg3D)
library(dplyr)
library(magrittr)
```

Vamos iniciar com um conjunto de dados simples 'iris'.

---

> ### Organizar dados.

> #### **COLUNAS**

##### OPERADOR PIPE
Instalar o pct magrittr. Agora, através dos dados 'iris' vamos selecionar duas colunas e aplicar um filtro nelas. Logo após vamos fazer uma lista agrupada em 'Species' cuja única coluna seja o número de ocorrência (frequência absoluta) de cada espécie.

```{r}
iris %>% select(Species, Sepal.Width) %>%
  filter(Sepal.Width >= 3) %>% ddply(.(Species), summarise,
                                     n = sum(!is.na(Sepal.Width)))
```


##### COMO ALTERAR OS NOMES DAS COLUNAS?

* Usando o índice da coluna:
```{r}
teste <- iris

names(teste)[5] <- 'Especies'
```


##### COMO MUDAR AS COLUNAS DE POSIÇÃO?

* Ordenando através das posições do df.

```{r}
# Ordena o cj de dados da última coluna para a primeira
iris.ord <- iris[5:1]

# Ordena de acordo com as posições desejadas
iris.ord <- iris.ord[c(1,3,5,4,2)]

```

* Utilizando o pacote **dply**:
  * Função **select()**: Manter ou remover colunas usando seus nomes ou tipos.

```{r}
# Sem PIPE
# Adiciona um vetor com os nomes das colunas na ordem desejada:
ex1 <- select(iris, c(Species, Petal.Width, Sepal.Width, Sepal.Length, Petal.Length))

# com PIPE
# Adiciona diretamente cada coluna na ordem desejada:
ex2 <- iris %>%
  select(Species, Sepal.Width, Petal.Width, Sepal.Length, Petal.Length)

dados <- ddply(iris, .(Species), summarise,
                n = sum(!is.na(Species)),
                f.rel = sum(!is.na(Species))/sum(sum(!is.na(Species))),
                media = mean(Petal.Length))

names(dist.f)[2] <- 'freq.abs'
dist.f$freq.rel <- dist.f$freq.abs/sum(dist.f$freq.abs)

df <- data.frame(table(iris$Species))

```

##### COMO A POSIÇÃO DOS ELEMENTOS DE UMA COLUNA?

* Alterar a posição dos elementos de uma coluna em um df altera necessariamente os elementos correspondentes nas demais colunas?